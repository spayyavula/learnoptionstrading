import{r as i,j as e,z as k,d as g,G as L,D as O,A as T,H as R,J as I,K as x,x as E,M as F,N as G,E as A,L as $,e as Y,Y as z,O as V,S as B,Q as M}from"./index-Dd0hWMfm.js";import{A as U}from"./arrow-left-DN2qUljz.js";const _=({plan:a,onSuccess:b,onCancel:C,className:o=""})=>{const[h,y]=i.useState(!1),[j,c]=i.useState(null),[r,v]=i.useState(null),[w,n]=i.useState(!1),p=(l=>{switch(l){case"monthly":return x.monthly;case"yearly":return x.yearly;case"enterprise":return x.enterprise;case"pro":return x.pro;default:return x.monthly}})(a),f=(r?.isValid?r.finalAmount:p)||p||0,s=async()=>{console.log("💳 Checkout button clicked, showing terms modal..."),n(!0)},t=async()=>{console.log("✅ Terms accepted, proceeding with checkout:",{plan:a,appliedCoupon:r}),y(!0),c(null);try{const l=r?.coupon?.code;console.log("🛒 Initiating checkout with:",{plan:a,couponCode:l});try{await E.redirectToCheckout(a,void 0,l),console.log("✅ Checkout redirect successful")}catch(u){console.error("❌ Checkout error details:",u);let m="Unknown checkout error";u instanceof Error?m=u.message:typeof u=="string"?m=u:u?.message&&(m=u.message),m.includes("JSON")?c("Payment system error. Please try again or contact support."):m.includes("Invalid payment method")?c("Invalid payment method"):m.includes("network")||m.includes("fetch")?c("Network error. Please check your connection and try again."):c(`Checkout failed: ${m}`)}}catch(l){console.error("❌ Outer checkout error:",l),c(`Failed to initialize checkout: ${l instanceof Error?l.message:"Unknown error"}`)}finally{y(!1),n(!1)}},d=()=>{n(!1)},N=l=>{v(l)},S=()=>{v(null)};return e.jsxs("div",{className:`bg-white rounded-lg shadow-md border border-gray-200 p-6 ${o}`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:a==="monthly"?"Monthly Plan":a==="yearly"?"Annual Plan":a==="enterprise"?"Enterprise Plan":a==="pro"?"Pro Plan":"Plan"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:["$",f,e.jsxs("span",{className:"text-sm text-gray-500 ml-1",children:["/",a==="yearly"?"year":"month"]})]}),r?.isValid&&e.jsx("div",{className:"ml-3 px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:k.formatDiscount(r.coupon)})]}),r?.isValid&&e.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:[e.jsxs("span",{className:"line-through",children:["$",p]})," → ",e.jsxs("span",{className:"text-green-600 font-medium",children:["$",f]})," ",e.jsxs("span",{children:["(",k.formatDiscount(r.coupon),")"]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(g,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Full access to all trading features"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(g,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Advanced analytics and reporting"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(g,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Community integration features"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(g,{className:"h-5 w-5 text-green-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-gray-700",children:"Priority support"})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(L,{plan:a,originalAmount:p,onCouponApplied:N,onCouponRemoved:S,appliedCoupon:r})}),e.jsx("button",{onClick:s,disabled:h,className:"w-full flex items-center justify-center px-4 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-5 w-5"}),"Proceed to Checkout"]})}),j&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx("p",{className:"text-sm text-red-700",children:j})]})}),e.jsxs("div",{className:"mt-4 flex items-center justify-center text-sm text-gray-500",children:[e.jsx(R,{className:"h-4 w-4 mr-1 text-gray-400"}),e.jsx("span",{children:"Secure payment powered by Stripe"})]}),w&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:d}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.jsx(I,{onAccept:t,onDecline:d})})]})})]})};function H(){const a=F(),b=G(),C=()=>{const t=new URLSearchParams(b.search).get("plan");return t&&["monthly","yearly","enterprise","pro"].includes(t)?t:"monthly"},[o,h]=i.useState(C()),[y,j]=i.useState(!1),[c,r]=i.useState(!1),[v,w]=i.useState(null),[n,P]=i.useState({});i.useEffect(()=>{const s=new URLSearchParams(b.search),t=s.get("plan");if(t&&["monthly","yearly","enterprise","pro"].includes(t)&&h(t),s.get("subscription")==="success"){r(!0);const d={plan:s.get("plan")||void 0,coupon:s.get("coupon")||void 0,isDeal:s.get("deal")==="true"};P(d),setTimeout(()=>{window.history.replaceState({},document.title,window.location.pathname)},100)}j(k.hasActiveDeals())},[b]);const p=s=>{w(s),h(s.plan)},D=async s=>{try{await E.redirectToCheckout(s.plan,void 0,s.couponCode,!0)}catch(t){console.error("Failed to claim deal:",t),alert("Failed to process deal. Please try again.")}},f=V(o);return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("button",{onClick:()=>a(-1),className:"flex items-center text-blue-600 hover:text-blue-800",children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),"Back"]})}),c&&e.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-6 py-4 rounded-lg relative mb-6",role:"alert",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(g,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"block sm:inline font-medium text-lg",children:n.isDeal?"Deal Claimed Successfully!":"Subscription Activated!"})]}),e.jsxs("div",{className:"ml-7",children:[e.jsxs("p",{className:"text-green-800 mb-2",children:[n.isDeal?`Congratulations! You've successfully claimed your special deal and subscribed to the ${n.plan} plan.`:"Thank you for subscribing to Learn Options Trading Academy!"," Your account has been activated and you now have access to all premium features."]}),n.coupon&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(A,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsxs("span",{className:"font-medium text-green-800",children:["Deal Applied: ",n.coupon]})]}),e.jsx("p",{className:"text-green-700 text-sm mt-1",children:n.isDeal?"Your special deal discount has been applied to your subscription.":"Your coupon discount has been applied to your subscription."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mt-3",children:[e.jsxs($,{to:"/app",className:"inline-flex items-center text-sm bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(Y,{className:"mr-1 h-3 w-3"}),"Start Trading Now"]}),e.jsx($,{to:"/app/settings",className:"inline-flex items-center text-sm bg-green-100 text-green-800 px-4 py-2 rounded-md hover:bg-green-200 transition-colors border border-green-300",children:"View Subscription Details"})]})]})]}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Choose Your Subscription Plan"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Get full access to all features and take your trading skills to the next level"})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"inline-flex rounded-md shadow-sm",children:[{id:"monthly",label:"Monthly",description:`$${x.monthly}/month`,recommended:!1},{id:"yearly",label:"Annual",description:`Save ${z}%`,recommended:!0},{id:"pro",label:"Pro",description:`$${x.pro}/month`,recommended:!1},{id:"enterprise",label:"Enterprise",description:`$${x.enterprise}/month`,recommended:!1}].map((s,t)=>{const d=o===s.id,N=t===0,S=t===3;return e.jsxs("button",{type:"button",onClick:()=>{h(s.id)},className:`relative inline-flex flex-col items-center px-4 py-3 ${N?"rounded-l-md":""} ${S?"rounded-r-md":""} border ${d?"bg-blue-600 text-white border-blue-600 z-10":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"} ${N?"":"-ml-px"}`,children:[s.recommended&&e.jsx("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"Recommended"})}),e.jsx("span",{className:"font-medium",children:s.label}),e.jsx("span",{className:`text-xs ${d?"text-blue-100":"text-gray-500"}`,children:s.description})]},s.id)})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsx(_,{plan:o,onSuccess:()=>r(!0)})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:[f.name," Features"]}),e.jsx("div",{className:"space-y-4",children:f.features.map((s,t)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx(g,{className:"h-5 w-5 text-green-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s}),e.jsx("p",{className:"text-sm text-gray-600",children:{0:"Access all trading features, including options trading, portfolio management, and advanced analytics",1:"Get detailed insights into your trading performance and portfolio allocation",2:"Share trades and insights with the community across multiple platforms",3:"Get help when you need it with our responsive support team",4:"Access exclusive educational content to improve your trading skills",5:o==="enterprise"?"Get personalized assistance from our dedicated team":o==="pro"?"Advanced features and priority access to new tools":"Get personalized assistance from our dedicated team",6:o==="enterprise"?"Custom branding and white-label options for your organization":"Dedicated account manager for premium support"}[t]||""})]})]},t))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(B,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Satisfaction Guarantee"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Not satisfied? Contact us within 14 days for a full refund, no questions asked."})]})]})})]})]}),y&&e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(A,{className:"h-6 w-6 text-red-500 mr-2"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Special Offers"})]}),e.jsx("p",{className:"text-lg text-gray-600",children:"Limited time deals to help you save on your subscription"})]}),e.jsx(M,{onSelectDeal:p,onClaimDeal:D,selectedPlan:o,className:"max-w-4xl mx-auto"})]}),e.jsx("div",{className:"mt-12 p-4 bg-yellow-50 border border-yellow-200 rounded-lg max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(T,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800",children:"Important Information"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Options World is for educational purposes only. Our platform is designed to help you learn and develop trading skills, not to provide financial advice. Options trading involves significant risk and requires proper education."})]})]})})]})})}export{H as default};
