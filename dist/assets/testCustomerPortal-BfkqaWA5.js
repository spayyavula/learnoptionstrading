import{x as o}from"./index-Dd0hWMfm.js";async function s(){if(console.log("🧪 Testing customer portal functionality..."),!o.getSubscriptionStatus().active){console.log("📝 Creating mock subscription for testing...");const t={id:`sub_test_${Date.now()}`,plan:"monthly",status:"active",created:new Date().toISOString(),current_period_end:new Date(Date.now()+30*24*60*60*1e3).toISOString(),coupon_applied:null,amount_paid:29,customer_id:`cus_test_${Date.now()}`};localStorage.setItem("mock_subscription",JSON.stringify(t)),console.log("✅ Mock subscription created:",t)}try{const t=o.getSubscriptionStatus();if(console.log("📊 Current subscription status:",t),t.subscription?.customer_id){console.log("🏪 Testing customer portal access...");const e=await o.createCustomerPortalSession(t.subscription.customer_id);return console.log("✅ Portal URL generated:",e),{success:!0,portalUrl:e,subscription:t.subscription}}else return console.error("❌ No customer ID found"),{success:!1,error:"No customer ID found"}}catch(t){return console.error("❌ Portal test failed:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}typeof window<"u"&&(window.testCustomerPortal=s);export{s as testCustomerPortal};
